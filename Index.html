<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Industry Tycoon</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 20px;
    color: #333;
}

.container {
    max-width: 1600px;
    margin: 0 auto;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    overflow: hidden;
}

header {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header h1 {
    font-size: 2em;
    font-weight: bold;
}

.game-controls {
    display: flex;
    gap: 10px;
}

.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
    font-size: 14px;
}

.btn-primary {
    background: #4CAF50;
    color: white;
}

.btn-primary:hover {
    background: #45a049;
    transform: translateY(-2px);
}

.btn-danger {
    background: #f44336;
    color: white;
}

.btn-danger:hover {
    background: #da190b;
    transform: translateY(-2px);
}

.btn-secondary {
    background: #ff9800;
    color: white;
}

.btn-secondary:hover {
    background: #e68900;
    transform: translateY(-2px);
}

.stats-bar {
    background: #f8f9fa;
    padding: 20px 30px;
    display: flex;
    justify-content: space-around;
    border-bottom: 2px solid #dee2e6;
}

.stat-item {
    text-align: center;
}

.stat-label {
    display: block;
    font-size: 0.9em;
    color: #6c757d;
    margin-bottom: 5px;
}

.stat-value {
    display: block;
    font-size: 1.5em;
    font-weight: bold;
    color: #2a5298;
}

.main-content {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    gap: 20px;
    padding: 20px;
    min-height: 600px;
}

.panel {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

.panel h2 {
    color: #2a5298;
    margin-bottom: 15px;
    font-size: 1.3em;
    border-bottom: 2px solid #e0e0e0;
    padding-bottom: 10px;
}

.actions-panel {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
}

.actions-panel h2 {
    color: white;
    border-bottom-color: rgba(255,255,255,0.3);
}

.action-buttons {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-top: 15px;
}

.action-btn {
    padding: 15px;
    background: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: all 0.3s;
    color: #333;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.action-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    background: #f0f0f0;
}

.summary-box {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    min-height: 150px;
    max-height: 400px;
    overflow-y: auto;
}

.summary-box p {
    margin-bottom: 8px;
    line-height: 1.6;
}

.summary-box strong {
    color: #2a5298;
}

.achievements-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.achievement {
    padding: 10px;
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.3s;
}

.achievement.locked {
    background: #e0e0e0;
    color: #999;
}

.achievement.unlocked {
    background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
    color: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.trends-box {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.trend {
    padding: 12px;
    border-radius: 8px;
    font-weight: 500;
}

.trend.positive {
    background: #d4edda;
    color: #155724;
    border-left: 4px solid #28a745;
}

.trend.negative {
    background: #f8d7da;
    color: #721c24;
    border-left: 4px solid #dc3545;
}

.releases-list {
    max-height: 400px;
    overflow-y: auto;
}

.release-item {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 10px;
    border-left: 4px solid #2a5298;
}

.release-item h3 {
    color: #2a5298;
    margin-bottom: 8px;
    font-size: 1.1em;
}

.release-item p {
    font-size: 0.9em;
    color: #6c757d;
    margin-bottom: 4px;
}

.certification {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: bold;
    margin-top: 5px;
}

.cert-gold {
    background: #ffd700;
    color: #333;
}

.cert-platinum {
    background: #e5e4e2;
    color: #333;
}

.cert-diamond {
    background: #b9f2ff;
    color: #333;
}

.chart-list {
    max-height: 600px;
    overflow-y: auto;
}

.chart-item {
    background: #f8f9fa;
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s;
}

.chart-item:hover {
    background: #e9ecef;
    transform: translateX(5px);
}

.chart-position {
    font-weight: bold;
    font-size: 1.2em;
    color: #2a5298;
    min-width: 30px;
}

.chart-info {
    flex: 1;
}

.chart-info strong {
    color: #333;
    display: block;
    margin-bottom: 3px;
}

.chart-info small {
    color: #6c757d;
}

.chart-item.player-song {
    background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
    border-left: 4px solid #e17055;
}

.empty-state {
    text-align: center;
    color: #6c757d;
    padding: 40px 20px;
    font-style: italic;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.6);
}

.modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 30px;
    border-radius: 15px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    animation: slideIn 0.3s;
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.close:hover {
    color: #000;
}

#modalBody h2 {
    color: #2a5298;
    margin-bottom: 20px;
}

.modal-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
}

.form-group input,
.form-group select {
    padding: 10px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #2a5298;
}

.form-group small {
    color: #6c757d;
    margin-top: 3px;
    font-size: 0.85em;
}

.modal-actions {
    display: flex;
    gap: 10px;
    margin-top: 20px;
    justify-content: flex-end;
}

.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
}

.checkbox-item {
    display: flex;
    align-items: center;
    gap: 5px;
}

.checkbox-item input[type="checkbox"] {
    width: auto;
    cursor: pointer;
}

.promo-option {
    background: #e3f2fd;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 10px;
    border-left: 4px solid #2196f3;
}

.promo-option label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}

.promo-option input[type="radio"] {
    width: auto;
}

.price-info {
    font-weight: bold;
    color: #2a5298;
}

/* Scrollbar Styles */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* Responsive Design */
@media (max-width: 1200px) {
    .main-content {
        grid-template-columns: 1fr;
    }
    
    .action-buttons {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 768px) {
    header {
        flex-direction: column;
        gap: 15px;
    }
    
    .stats-bar {
        flex-direction: column;
        gap: 15px;
    }
    
    .action-buttons {
        grid-template-columns: 1fr;
    }
    
    .game-controls {
        flex-direction: column;
        width: 100%;
    }
    
    .btn {
        width: 100%;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ Music Industry Tycoon</h1>
            <div class="game-controls">
                <button id="saveGame" class="btn btn-primary">üíæ Save Game</button>
                <button id="newGame" class="btn btn-danger">üîÑ New Game</button>
                <button id="sandboxMode" class="btn btn-secondary">‚öôÔ∏è Sandbox Mode</button>
            </div>
        </header>

        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-label">Week:</span>
                <span id="currentWeek" class="stat-value">1/52</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Balance:</span>
                <span id="balance" class="stat-value">$10,000</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Total Streams:</span>
                <span id="totalStreams" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Total Sales:</span>
                <span id="totalSales" class="stat-value">0</span>
            </div>
        </div>

        <div class="main-content">
            <div class="left-panel">
                <div class="panel">
                    <h2>üìä Week Summary</h2>
                    <div id="weekSummary" class="summary-box">
                        <p>Start your music career!</p>
                    </div>
                </div>

                <div class="panel">
                    <h2>üèÜ Achievements</h2>
                    <div id="achievements" class="achievements-list">
                        <div class="achievement locked">First Release</div>
                        <div class="achievement locked">Gold Certified</div>
                        <div class="achievement locked">Platinum Certified</div>
                        <div class="achievement locked">Diamond Certified</div>
                        <div class="achievement locked">Billboard #1</div>
                        <div class="achievement locked">Million Seller</div>
                        <div class="achievement locked">Tour Master</div>
                    </div>
                </div>

                <div class="panel">
                    <h2>üìà Current Trends</h2>
                    <div id="trends" class="trends-box">
                        <div class="trend positive">Hip-Hop is hot! (+30% sales)</div>
                    </div>
                </div>
            </div>

            <div class="center-panel">
                <div class="actions-panel">
                    <h2>üéØ Actions</h2>
                    <div class="action-buttons">
                        <button class="action-btn" id="releaseMusic">üé§ Release Music</button>
                        <button class="action-btn" id="recordSong">üéôÔ∏è Record Song</button>
                        <button class="action-btn" id="musicVideo">üé¨ Music Video</button>
                        <button class="action-btn" id="streaming">üì± Streaming Services</button>
                        <button class="action-btn" id="radio">üìª Radio</button>
                        <button class="action-btn" id="merch">üëï Sell Merch</button>
                        <button class="action-btn" id="touring">üé∏ Touring</button>
                        <button class="action-btn" id="endWeek">‚è≠Ô∏è End Week</button>
                    </div>
                </div>

                <div class="panel">
                    <h2>üéµ Your Releases</h2>
                    <div id="yourReleases" class="releases-list">
                        <p class="empty-state">No releases yet. Start recording!</p>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="panel">
                    <h2>üìä Billboard Hot 100</h2>
                    <div id="billboard100" class="chart-list"></div>
                </div>

                <div class="panel">
                    <h2>üíø Billboard 200</h2>
                    <div id="billboard200" class="chart-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
// Music Industry Tycoon Game
class MusicGame {
    constructor() {
        this.currentWeek = 1;
        this.balance = 10000;
        this.totalStreams = 0;
        this.totalSales = 0;
        this.totalViews = 0;
        this.recordedSongs = [];
        this.releases = [];
        this.achievements = {
            firstRelease: false,
            goldCertified: false,
            platinumCertified: false,
            diamondCertified: false,
            billboardOne: false,
            millionSeller: false,
            tourMaster: false
        };
        this.trends = [];
        this.billboard100 = [];
        this.billboard200 = [];
        this.sandboxMode = false;
        
        this.init();
    }

    init() {
        this.generateTrends();
        this.populateBillboards();
        this.updateUI();
        this.attachEventListeners();
    }

    attachEventListeners() {
        document.getElementById('releaseMusic').addEventListener('click', () => this.showReleaseModal());
        document.getElementById('recordSong').addEventListener('click', () => this.showRecordModal());
        document.getElementById('musicVideo').addEventListener('click', () => this.showMusicVideoModal());
        document.getElementById('streaming').addEventListener('click', () => this.showStreamingModal());
        document.getElementById('radio').addEventListener('click', () => this.showRadioModal());
        document.getElementById('merch').addEventListener('click', () => this.showMerchModal());
        document.getElementById('touring').addEventListener('click', () => this.showTouringModal());
        document.getElementById('endWeek').addEventListener('click', () => this.endWeek());
        document.getElementById('saveGame').addEventListener('click', () => this.saveGame());
        document.getElementById('newGame').addEventListener('click', () => this.newGame());
        document.getElementById('sandboxMode').addEventListener('click', () => this.showSandboxModal());

        // Modal close
        document.querySelector('.close').addEventListener('click', () => this.closeModal());
        window.addEventListener('click', (e) => {
            if (e.target.id === 'modal') this.closeModal();
        });
    }

    generateTrends() {
        const genres = ['Hip-Hop', 'Pop', 'Rock', 'R&B', 'Electronic', 'Country', 'Indie'];
        const trendTypes = [
            { text: 'is hot!', multiplier: 1.3, type: 'positive' },
            { text: 'is trending!', multiplier: 1.2, type: 'positive' },
            { text: 'is cooling down', multiplier: 0.8, type: 'negative' },
            { text: 'is struggling', multiplier: 0.7, type: 'negative' }
        ];

        this.trends = [];
        const numTrends = Math.floor(Math.random() * 3) + 2;
        
        for (let i = 0; i < numTrends; i++) {
            const genre = genres[Math.floor(Math.random() * genres.length)];
            const trend = trendTypes[Math.floor(Math.random() * trendTypes.length)];
            const bonus = Math.round((trend.multiplier - 1) * 100);
            const sign = bonus > 0 ? '+' : '';
            
            this.trends.push({
                genre,
                text: `${genre} ${trend.text} (${sign}${bonus}% sales)`,
                multiplier: trend.multiplier,
                type: trend.type
            });
        }
    }

    populateBillboards() {
        const artistNames = [
            'Drake', 'Taylor Swift', 'Bad Bunny', 'The Weeknd', 'Morgan Wallen',
            'SZA', 'Travis Scott', 'Olivia Rodrigo', 'Doja Cat', 'Post Malone',
            'Ariana Grande', 'Ed Sheeran', 'Billie Eilish', 'Harry Styles', 'Lil Baby',
            'Kendrick Lamar', 'Dua Lipa', 'Metro Boomin', 'Luke Combs', 'Future'
        ];

        const songTitles = [
            'Midnight Dreams', 'Summer Nights', 'Heartbreak Hotel', 'Diamond Sky',
            'Lost in Paradise', 'Electric Love', 'Neon Lights', 'Golden Hour',
            'Velvet Touch', 'Crimson Moon', 'Stellar', 'Wavelength', 'Echoes',
            'Vibe Check', 'No Cap', 'Ride or Die', 'Flex', 'Mood Swings',
            'Chemistry', 'Butterfly Effect'
        ];

        const albumTitles = [
            'After Hours', 'Renaissance', 'Eternal Summer', 'Midnight Memories',
            'Utopia', 'The Album', 'SOUR', 'Future Nostalgia', 'Scorpion',
            'Dangerous', 'Planet Her', 'Certified Lover Boy', 'Happier Than Ever',
            'Fine Line', 'My Turn', 'DAMN.', 'Twelve Carat Toothache', 'Dangerous'
        ];

        // Populate Billboard Hot 100
        this.billboard100 = [];
        for (let i = 0; i < 20; i++) {
            const artist = artistNames[Math.floor(Math.random() * artistNames.length)];
            const title = songTitles[Math.floor(Math.random() * songTitles.length)];
            const units = Math.floor(Math.random() * 500000) + 50000;
            
            this.billboard100.push({
                position: i + 1,
                title,
                artist,
                units,
                weeksOnChart: Math.floor(Math.random() * 20) + 1,
                isPlayer: false
            });
        }

        // Populate Billboard 200
        this.billboard200 = [];
        for (let i = 0; i < 20; i++) {
            const artist = artistNames[Math.floor(Math.random() * artistNames.length)];
            const title = albumTitles[Math.floor(Math.random() * albumTitles.length)];
            const units = Math.floor(Math.random() * 200000) + 20000;
            
            this.billboard200.push({
                position: i + 1,
                title,
                artist,
                units,
                weeksOnChart: Math.floor(Math.random() * 30) + 1,
                isPlayer: false
            });
        }
    }

    showModal(content) {
        document.getElementById('modalBody').innerHTML = content;
        document.getElementById('modal').style.display = 'block';
    }

    closeModal() {
        document.getElementById('modal').style.display = 'none';
    }

    showRecordModal() {
        const content = `
            <h2>üéôÔ∏è Record Song</h2>
            <form class="modal-form" id="recordForm">
                <div class="form-group">
                    <label>Song Title:</label>
                    <input type="text" id="songTitle" required>
                </div>
                <div class="form-group">
                    <label>Genre:</label>
                    <select id="songGenre" required>
                        <option value="Hip-Hop">Hip-Hop</option>
                        <option value="Pop">Pop</option>
                        <option value="Rock">Rock</option>
                        <option value="R&B">R&B</option>
                        <option value="Electronic">Electronic</option>
                        <option value="Country">Country</option>
                        <option value="Indie">Indie</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Recording Quality:</label>
                    <select id="recordingQuality" required>
                        <option value="basic">Basic ($500) - Lower quality</option>
                        <option value="standard">Standard ($2,000) - Good quality</option>
                        <option value="professional">Professional ($5,000) - High quality</option>
                        <option value="premium">Premium ($10,000) - Top tier</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Record Song</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('recordForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.recordSong();
        });
    }

    recordSong() {
        const title = document.getElementById('songTitle').value;
        const genre = document.getElementById('songGenre').value;
        const quality = document.getElementById('recordingQuality').value;
        
        const costs = { basic: 500, standard: 2000, professional: 5000, premium: 10000 };
        const qualityMultipliers = { basic: 0.7, standard: 1.0, professional: 1.3, premium: 1.6 };
        
        const cost = costs[quality];
        
        if (this.balance < cost) {
            alert('Not enough money to record this song!');
            return;
        }
        
        this.balance -= cost;
        
        const song = {
            id: Date.now(),
            title,
            genre,
            quality,
            qualityMultiplier: qualityMultipliers[quality],
            recordedWeek: this.currentWeek,
            released: false
        };
        
        this.recordedSongs.push(song);
        this.closeModal();
        this.updateUI();
        alert(`Song "${title}" recorded successfully!`);
    }

    showReleaseModal() {
        if (this.recordedSongs.filter(s => !s.released).length === 0) {
            alert('You need to record songs before releasing!');
            return;
        }

        const unreleasedSongs = this.recordedSongs.filter(s => !s.released);
        const songOptions = unreleasedSongs.map(s => 
            `<div class="checkbox-item">
                <input type="checkbox" id="song_${s.id}" value="${s.id}">
                <label for="song_${s.id}">${s.title} (${s.genre})</label>
            </div>`
        ).join('');

        const content = `
            <h2>üé§ Release Music</h2>
            <form class="modal-form" id="releaseForm">
                <div class="form-group">
                    <label>Release Type:</label>
                    <select id="releaseType" required>
                        <option value="single">Single ($1.29)</option>
                        <option value="ep">EP ($3.99-$6.99)</option>
                        <option value="mixtape">Mixtape ($6.99-$9.99)</option>
                        <option value="versionEP">Versions EP ($4.99)</option>
                        <option value="album">Album ($9.99-$15.99)</option>
                        <option value="compilation">Compilation ($9.99-$15.99)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Select Songs:</label>
                    <div class="checkbox-group" id="songSelection">
                        ${songOptions}
                    </div>
                </div>
                <div class="form-group">
                    <label>Promotion Level:</label>
                    <div id="promoOptions">
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="promo" value="none" checked>
                                <span>No Promotion (Free)</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="promo" value="basic">
                                <span>Basic Promotion ($1,000) - 4 weeks on charts</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="promo" value="standard">
                                <span>Standard Promotion ($5,000) - 8 weeks on charts</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="promo" value="premium">
                                <span>Premium Promotion ($15,000) - 16 weeks on charts</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="physicalMerch">
                        Include Physical Merch (CDs/Vinyls for albums/EPs)
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Release</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('releaseForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.releaseMusic();
        });
    }

    releaseMusic() {
        const releaseType = document.getElementById('releaseType').value;
        const selectedSongs = Array.from(document.querySelectorAll('#songSelection input:checked'))
            .map(cb => this.recordedSongs.find(s => s.id == cb.value));
        const promo = document.querySelector('input[name="promo"]:checked').value;
        const physicalMerch = document.getElementById('physicalMerch').checked;

        if (selectedSongs.length === 0) {
            alert('Please select at least one song!');
            return;
        }

        // Validate song count for release type
        const validations = {
            single: { min: 1, max: 1 },
            ep: { min: 3, max: 8 },
            mixtape: { min: 4, max: 20 },
            versionEP: { min: 1, max: 1 },
            album: { min: 8, max: 20 },
            compilation: { min: 1, max: 30 }
        };

        const validation = validations[releaseType];
        if (selectedSongs.length < validation.min || selectedSongs.length > validation.max) {
            alert(`${releaseType} requires ${validation.min}-${validation.max} songs!`);
            return;
        }

        // Calculate price
        let price = 0;
        const songCount = selectedSongs.length;
        
        switch(releaseType) {
            case 'single':
                price = 1.29;
                break;
            case 'ep':
                price = songCount <= 5 ? 3.99 : 6.99;
                break;
            case 'mixtape':
                price = songCount <= 10 ? 6.99 : 9.99;
                break;
            case 'versionEP':
                price = 4.99;
                break;
            case 'album':
                price = songCount <= 12 ? 9.99 : 15.99;
                break;
            case 'compilation':
                price = songCount <= 10 ? 9.99 : 15.99;
                break;
        }

        // Calculate promo cost
        const promoCosts = { none: 0, basic: 1000, standard: 5000, premium: 15000 };
        const promoWeeks = { none: 2, basic: 4, standard: 8, premium: 16 };
        const promoCost = promoCosts[promo];

        if (this.balance < promoCost) {
            alert('Not enough money for this promotion level!');
            return;
        }

        this.balance -= promoCost;

        // Create release
        const release = {
            id: Date.now(),
            type: releaseType,
            title: selectedSongs[0].title,
            songs: selectedSongs,
            price,
            releasedWeek: this.currentWeek,
            streams: 0,
            sales: 0,
            views: 0,
            units: 0,
            revenue: 0,
            promotion: promo,
            weeksOnChart: 0,
            maxWeeksOnChart: promoWeeks[promo],
            physicalMerch,
            certified: null
        };

        // Mark songs as released
        selectedSongs.forEach(song => {
            const index = this.recordedSongs.findIndex(s => s.id === song.id);
            if (index !== -1) {
                this.recordedSongs[index].released = true;
            }
        });

        this.releases.push(release);

        // Check achievement
        if (!this.achievements.firstRelease) {
            this.achievements.firstRelease = true;
            this.unlockAchievement('First Release');
        }

        this.closeModal();
        this.updateUI();
        alert(`${releaseType} "${release.title}" released successfully!`);
    }

    showMusicVideoModal() {
        const releasedSingles = this.releases.filter(r => r.type === 'single' && !r.hasVideo);
        
        if (releasedSingles.length === 0) {
            alert('No singles available for music videos!');
            return;
        }

        const songOptions = releasedSingles.map(r => 
            `<option value="${r.id}">${r.title}</option>`
        ).join('');

        const content = `
            <h2>üé¨ Create Music Video</h2>
            <form class="modal-form" id="videoForm">
                <div class="form-group">
                    <label>Select Single:</label>
                    <select id="videoSong" required>
                        ${songOptions}
                    </select>
                </div>
                <div class="form-group">
                    <label>Video Quality:</label>
                    <select id="videoQuality" required>
                        <option value="basic">Basic ($2,000) - Lower views</option>
                        <option value="standard">Standard ($5,000) - Good views</option>
                        <option value="professional">Professional ($15,000) - High views</option>
                        <option value="premium">Premium ($30,000) - Viral potential</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>YouTube Promotion:</label>
                    <div id="youtubePromo">
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="ytPromo" value="none" checked>
                                <span>No Promotion (Free)</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="ytPromo" value="playlist">
                                <span>Playlist Placement ($3,000) - 50K-200K views</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="ytPromo" value="bots">
                                <span>View Bots ($5,000) - 100K-500K views (risky)</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Video</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('videoForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.createMusicVideo();
        });
    }

    createMusicVideo() {
        const songId = parseInt(document.getElementById('videoSong').value);
        const quality = document.getElementById('videoQuality').value;
        const ytPromo = document.querySelector('input[name="ytPromo"]:checked').value;

        const costs = { basic: 2000, standard: 5000, professional: 15000, premium: 30000 };
        const promoCosts = { none: 0, playlist: 3000, bots: 5000 };
        
        const totalCost = costs[quality] + promoCosts[ytPromo];

        if (this.balance < totalCost) {
            alert('Not enough money!');
            return;
        }

        this.balance -= totalCost;

        const release = this.releases.find(r => r.id === songId);
        release.hasVideo = true;
        release.videoQuality = quality;
        release.ytPromo = ytPromo;

        const qualityMultipliers = { basic: 0.5, standard: 1.0, professional: 1.5, premium: 2.0 };
        const promoViews = { none: 0, playlist: Math.floor(Math.random() * 150000) + 50000, bots: Math.floor(Math.random() * 400000) + 100000 };
        
        const baseViews = Math.floor(Math.random() * 50000) + 10000;
        const views = Math.floor((baseViews + promoViews[ytPromo]) * qualityMultipliers[quality]);
        
        release.views += views;
        this.totalViews += views;

        this.closeModal();
        this.updateUI();
        alert(`Music video created! Gained ${views.toLocaleString()} views!`);
    }

    showStreamingModal() {
        const activeReleases = this.releases.filter(r => 
            this.currentWeek - r.releasedWeek <= r.maxWeeksOnChart
        );

        if (activeReleases.length === 0) {
            alert('No active releases for streaming promotion!');
            return;
        }

        const releaseOptions = activeReleases.map(r => 
            `<option value="${r.id}">${r.title} (${r.type})</option>`
        ).join('');

        const content = `
            <h2>üì± Streaming Services</h2>
            <form class="modal-form" id="streamingForm">
                <div class="form-group">
                    <label>Select Release:</label>
                    <select id="streamingRelease" required>
                        ${releaseOptions}
                    </select>
                </div>
                <div class="form-group">
                    <label>Promotion Type:</label>
                    <div id="streamingPromo">
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="streaming" value="playlist" checked>
                                <span>Playlist Placement ($2,000) - 100K-500K streams</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="streaming" value="bots">
                                <span>Stream Bots ($3,000) - 200K-800K streams (risky)</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Promote</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('streamingForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.promoteStreaming();
        });
    }

    promoteStreaming() {
        const releaseId = parseInt(document.getElementById('streamingRelease').value);
        const promoType = document.querySelector('input[name="streaming"]:checked').value;

        const costs = { playlist: 2000, bots: 3000 };
        const cost = costs[promoType];

        if (this.balance < cost) {
            alert('Not enough money!');
            return;
        }

        this.balance -= cost;

        const release = this.releases.find(r => r.id === releaseId);
        
        const streams = promoType === 'playlist' 
            ? Math.floor(Math.random() * 400000) + 100000
            : Math.floor(Math.random() * 600000) + 200000;

        release.streams += streams;
        this.totalStreams += streams;

        this.closeModal();
        this.updateUI();
        alert(`Gained ${streams.toLocaleString()} streams!`);
    }

    showRadioModal() {
        const activeReleases = this.releases.filter(r => 
            this.currentWeek - r.releasedWeek <= r.maxWeeksOnChart
        );

        if (activeReleases.length === 0) {
            alert('No active releases for radio!');
            return;
        }

        const releaseOptions = activeReleases.map(r => 
            `<option value="${r.id}">${r.title} (${r.type})</option>`
        ).join('');

        const content = `
            <h2>üìª Radio Promotion</h2>
            <form class="modal-form" id="radioForm">
                <div class="form-group">
                    <label>Select Release:</label>
                    <select id="radioRelease" required>
                        ${releaseOptions}
                    </select>
                </div>
                <div class="form-group">
                    <label>Radio Strategy:</label>
                    <div id="radioPromo">
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="radio" value="legal" checked>
                                <span>Legal Promotion ($1,500) - Moderate reach</span>
                            </label>
                        </div>
                        <div class="promo-option">
                            <label>
                                <input type="radio" name="radio" value="payola">
                                <span>Payola ($5,000) - High reach (risky)</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Send to Radio</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('radioForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.promoteRadio();
        });
    }

    promoteRadio() {
        const releaseId = parseInt(document.getElementById('radioRelease').value);
        const radioType = document.querySelector('input[name="radio"]:checked').value;

        const costs = { legal: 1500, payola: 5000 };
        const cost = costs[radioType];

        if (this.balance < cost) {
            alert('Not enough money!');
            return;
        }

        this.balance -= cost;

        const release = this.releases.find(r => r.id === releaseId);
        
        const baseBoost = radioType === 'legal' 
            ? Math.floor(Math.random() * 30000) + 20000
            : Math.floor(Math.random() * 80000) + 50000;

        const streams = baseBoost;
        const sales = Math.floor(baseBoost * 0.1);

        release.streams += streams;
        release.sales += sales;
        this.totalStreams += streams;
        this.totalSales += sales;
        this.balance += sales * release.price;

        this.closeModal();
        this.updateUI();
        alert(`Radio promotion successful! Gained ${streams.toLocaleString()} streams and ${sales} sales!`);
    }

    showMerchModal() {
        const physicalReleases = this.releases.filter(r => 
            r.type !== 'single' && (this.currentWeek - r.releasedWeek <= r.maxWeeksOnChart)
        );

        const content = `
            <h2>üëï Sell Merchandise</h2>
            <form class="modal-form" id="merchForm">
                <div class="form-group">
                    <label>Merch Type:</label>
                    <select id="merchType" required>
                        <option value="cd">CDs ($15 each, Cost: $3)</option>
                        <option value="vinyl">Vinyls ($30 each, Cost: $8)</option>
                        <option value="shirt">T-Shirts ($25 each, Cost: $7)</option>
                        <option value="hoodie">Hoodies ($50 each, Cost: $15)</option>
                        <option value="poster">Posters ($10 each, Cost: $2)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantity:</label>
                    <input type="number" id="merchQuantity" min="10" max="10000" value="100" required>
                    <small>Order in batches (min 10)</small>
                </div>
                <div class="form-group">
                    <label>Link to Release (optional):</label>
                    <select id="merchRelease">
                        <option value="">General Merch</option>
                        ${physicalReleases.map(r => 
                            `<option value="${r.id}">${r.title}</option>`
                        ).join('')}
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Order Merch</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('merchForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.orderMerch();
        });
    }

    orderMerch() {
        const merchType = document.getElementById('merchType').value;
        const quantity = parseInt(document.getElementById('merchQuantity').value);
        const releaseId = document.getElementById('merchRelease').value;

        const merchData = {
            cd: { price: 15, cost: 3 },
            vinyl: { price: 30, cost: 8 },
            shirt: { price: 25, cost: 7 },
            hoodie: { price: 50, cost: 15 },
            poster: { price: 10, cost: 2 }
        };

        const data = merchData[merchType];
        const totalCost = data.cost * quantity;

        if (this.balance < totalCost) {
            alert('Not enough money!');
            return;
        }

        this.balance -= totalCost;

        // Simulate sales over time
        const sellRate = Math.random() * 0.7 + 0.3; // 30-100% sell rate
        const sold = Math.floor(quantity * sellRate);
        const revenue = sold * data.price;

        this.balance += revenue;

        if (releaseId) {
            const release = this.releases.find(r => r.id == releaseId);
            if (release) {
                release.merchRevenue = (release.merchRevenue || 0) + revenue;
            }
        }

        this.closeModal();
        this.updateUI();
        alert(`Sold ${sold}/${quantity} ${merchType}s for $${revenue.toLocaleString()}!`);
    }

    showTouringModal() {
        const content = `
            <h2>üé∏ Plan Tour</h2>
            <form class="modal-form" id="tourForm">
                <div class="form-group">
                    <label>Tour Size:</label>
                    <select id="tourSize" required>
                        <option value="small">Small Venues (5 shows) - Cost: $10,000</option>
                        <option value="medium">Medium Venues (10 shows) - Cost: $30,000</option>
                        <option value="large">Large Venues (15 shows) - Cost: $75,000</option>
                        <option value="arena">Arena Tour (20 shows) - Cost: $150,000</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Regions:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="region_north" value="North America" checked>
                            <label for="region_north">North America</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="region_europe" value="Europe">
                            <label for="region_europe">Europe</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="region_asia" value="Asia">
                            <label for="region_asia">Asia</label>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Book Tour</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('tourForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.bookTour();
        });
    }

    bookTour() {
        const tourSize = document.getElementById('tourSize').value;
        const regions = Array.from(document.querySelectorAll('#tourForm .checkbox-group input:checked'))
            .map(cb => cb.value);

        if (regions.length === 0) {
            alert('Select at least one region!');
            return;
        }

        const tourCosts = { small: 10000, medium: 30000, large: 75000, arena: 150000 };
        const shows = { small: 5, medium: 10, large: 15, arena: 20 };
        
        const cost = tourCosts[tourSize] * regions.length;

        if (this.balance < cost) {
            alert('Not enough money!');
            return;
        }

        this.balance -= cost;

        // Calculate revenue
        const baseRevenue = { small: 30000, medium: 100000, large: 250000, arena: 500000 };
        const revenue = baseRevenue[tourSize] * regions.length * (Math.random() * 0.4 + 0.8);

        this.balance += revenue;
        const profit = revenue - cost;

        // Boost streams from tour
        const tourStreams = Math.floor(Math.random() * 500000) + 200000;
        this.totalStreams += tourStreams;

        if (!this.achievements.tourMaster && shows[tourSize] >= 15) {
            this.achievements.tourMaster = true;
            this.unlockAchievement('Tour Master');
        }

        this.closeModal();
        this.updateUI();
        alert(`Tour completed!\nRevenue: $${revenue.toLocaleString()}\nProfit: $${profit.toLocaleString()}\nBonus Streams: ${tourStreams.toLocaleString()}`);
    }

    showSandboxModal() {
        const content = `
            <h2>‚öôÔ∏è Sandbox Mode</h2>
            <form class="modal-form" id="sandboxForm">
                <div class="form-group">
                    <label>Starting Balance:</label>
                    <input type="number" id="sandboxBalance" value="${this.balance}" min="0" step="1000">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="enableSandbox" ${this.sandboxMode ? 'checked' : ''}>
                        Enable Sandbox Mode
                    </label>
                    <small>Allows custom starting balance</small>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="game.closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Apply</button>
                </div>
            </form>
        `;
        
        this.showModal(content);
        
        document.getElementById('sandboxForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.applySandbox();
        });
    }

    applySandbox() {
        const balance = parseInt(document.getElementById('sandboxBalance').value);
        const enabled = document.getElementById('enableSandbox').checked;

        if (enabled) {
            this.balance = balance;
            this.sandboxMode = true;
            alert('Sandbox mode enabled!');
        } else {
            this.sandboxMode = false;
            alert('Sandbox mode disabled!');
        }

        this.closeModal();
        this.updateUI();
    }

    endWeek() {
        // Process all active releases
        let weekStreams = 0;
        let weekSales = 0;
        let weekViews = 0;
        let weekRevenue = 0;

        this.releases.forEach(release => {
            if (this.currentWeek - release.releasedWeek <= release.maxWeeksOnChart) {
                // Calculate organic growth
                const qualityBonus = release.songs.reduce((sum, s) => sum + s.qualityMultiplier, 0) / release.songs.length;
                const trendMultiplier = this.getTrendMultiplier(release.songs[0].genre);
                
                const baseStreams = Math.floor(Math.random() * 50000 + 10000) * qualityBonus * trendMultiplier;
                const baseSales = Math.floor(baseStreams * 0.05);
                const baseViews = release.hasVideo ? Math.floor(Math.random() * 20000 + 5000) : 0;

                release.streams += baseStreams;
                release.sales += baseSales;
                release.views += baseViews;
                release.weeksOnChart++;

                weekStreams += baseStreams;
                weekSales += baseSales;
                weekViews += baseViews;

                const salesRevenue = baseSales * release.price;
                const streamRevenue = baseStreams * 0.004; // $0.004 per stream
                weekRevenue += salesRevenue + streamRevenue;

                release.revenue += salesRevenue + streamRevenue;
                release.units = release.sales + Math.floor(release.streams / 1500);

                // Check certifications
                this.checkCertification(release);
            }
        });

        this.totalStreams += weekStreams;
        this.totalSales += weekSales;
        this.totalViews += weekViews;
        this.balance += weekRevenue;

        // Update billboards
        this.updateBillboards();

        // Generate new trends occasionally
        if (Math.random() < 0.3) {
            this.generateTrends();
        }

        // Week summary
        const summary = `
            <h3>Week ${this.currentWeek} Summary</h3>
            <p><strong>Streams:</strong> ${weekStreams.toLocaleString()}</p>
            <p><strong>Sales:</strong> ${weekSales.toLocaleString()}</p>
            <p><strong>Views:</strong> ${weekViews.toLocaleString()}</p>
            <p><strong>Revenue:</strong> $${weekRevenue.toLocaleString()}</p>
            <p><strong>Balance:</strong> $${this.balance.toLocaleString()}</p>
        `;

        document.getElementById('weekSummary').innerHTML = summary;

        // Advance week
        this.currentWeek++;

        // Check for year end
        if (this.currentWeek > 52) {
            this.showYearEndModal();
        } else {
            this.updateUI();
        }
    }

    getTrendMultiplier(genre) {
        const trend = this.trends.find(t => t.genre === genre);
        return trend ? trend.multiplier : 1.0;
    }

    checkCertification(release) {
        const units = release.units;
        
        if (units >= 10000000 && release.certified !== 'diamond') {
            release.certified = 'diamond';
            if (!this.achievements.diamondCertified) {
                this.achievements.diamondCertified = true;
                this.unlockAchievement('Diamond Certified');
            }
        } else if (units >= 1000000 && release.certified !== 'platinum' && release.certified !== 'diamond') {
            release.certified = 'platinum';
            if (!this.achievements.platinumCertified) {
                this.achievements.platinumCertified = true;
                this.unlockAchievement('Platinum Certified');
            }
        } else if (units >= 500000 && !release.certified) {
            release.certified = 'gold';
            if (!this.achievements.goldCertified) {
                this.achievements.goldCertified = true;
                this.unlockAchievement('Gold Certified');
            }
        }

        if (release.sales >= 1000000 && !this.achievements.millionSeller) {
            this.achievements.millionSeller = true;
            this.unlockAchievement('Million Seller');
        }
    }

    updateBillboards() {
        // Update Hot 100 with player songs
        const singles = this.releases.filter(r => r.type === 'single');
        
        singles.forEach(single => {
            const existingIndex = this.billboard100.findIndex(item => item.id === single.id);
            
            if (existingIndex !== -1) {
                this.billboard100[existingIndex].units = single.units;
                this.billboard100[existingIndex].weeksOnChart++;
            } else if (single.weeksOnChart <= single.maxWeeksOnChart) {
                this.billboard100.push({
                    id: single.id,
                    title: single.title,
                    artist: 'You',
                    units: single.units,
                    weeksOnChart: single.weeksOnChart,
                    isPlayer: true
                });
            }
        });

        // Sort and trim
        this.billboard100.sort((a, b) => b.units - a.units);
        this.billboard100 = this.billboard100.slice(0, 100);
        
        // Update positions
        this.billboard100.forEach((item, index) => {
            item.position = index + 1;
            if (item.isPlayer && item.position === 1 && !this.achievements.billboardOne) {
                this.achievements.billboardOne = true;
                this.unlockAchievement('Billboard #1');
            }
        });

        // Update Billboard 200
        const albums = this.releases.filter(r => r.type !== 'single');
        
        albums.forEach(album => {
            const existingIndex = this.billboard200.findIndex(item => item.id === album.id);
            
            if (existingIndex !== -1) {
                this.billboard200[existingIndex].units = album.units;
                this.billboard200[existingIndex].weeksOnChart++;
            } else if (album.weeksOnChart <= album.maxWeeksOnChart) {
                this.billboard200.push({
                    id: album.id,
                    title: album.title,
                    artist: 'You',
                    units: album.units,
                    weeksOnChart: album.weeksOnChart,
                    isPlayer: true
                });
            }
        });

        this.billboard200.sort((a, b) => b.units - a.units);
        this.billboard200 = this.billboard200.slice(0, 200);
        
        this.billboard200.forEach((item, index) => {
            item.position = index + 1;
        });

        // Remove expired songs
        this.billboard100 = this.billboard100.filter(item => 
            !item.isPlayer || item.weeksOnChart <= 20
        );
        this.billboard200 = this.billboard200.filter(item => 
            !item.isPlayer || item.weeksOnChart <= 30
        );
    }

    showYearEndModal() {
        const totalRevenue = this.releases.reduce((sum, r) => sum + r.revenue, 0);
        
        const content = `
            <h2>üéä Year End Summary</h2>
            <div class="summary-box">
                <h3>Year 1 Complete!</h3>
                <p><strong>Total Streams:</strong> ${this.totalStreams.toLocaleString()}</p>
                <p><strong>Total Sales:</strong> ${this.totalSales.toLocaleString()}</p>
                <p><strong>Total Views:</strong> ${this.totalViews.toLocaleString()}</p>
                <p><strong>Total Revenue:</strong> $${totalRevenue.toLocaleString()}</p>
                <p><strong>Final Balance:</strong> $${this.balance.toLocaleString()}</p>
                <p><strong>Releases:</strong> ${this.releases.length}</p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="game.continueGame()">Continue Year 2</button>
                <button class="btn btn-danger" onclick="game.newGame()">Start Over</button>
            </div>
        `;
        
        this.showModal(content);
    }

    continueGame() {
        this.currentWeek = 1;
        this.closeModal();
        this.updateUI();
        alert('Welcome to Year 2!');
    }

    unlockAchievement(name) {
        alert(`üèÜ Achievement Unlocked: ${name}!`);
        this.updateUI();
    }

    updateUI() {
        // Update stats
        document.getElementById('currentWeek').textContent = `${this.currentWeek}/52`;
        document.getElementById('balance').textContent = `$${this.balance.toLocaleString()}`;
        document.getElementById('totalStreams').textContent = this.totalStreams.toLocaleString();
        document.getElementById('totalSales').textContent = this.totalSales.toLocaleString();

        // Update achievements
        const achievementsDiv = document.getElementById('achievements');
        achievementsDiv.innerHTML = `
            <div class="achievement ${this.achievements.firstRelease ? 'unlocked' : 'locked'}">First Release</div>
            <div class="achievement ${this.achievements.goldCertified ? 'unlocked' : 'locked'}">Gold Certified</div>
            <div class="achievement ${this.achievements.platinumCertified ? 'unlocked' : 'locked'}">Platinum Certified</div>
            <div class="achievement ${this.achievements.diamondCertified ? 'unlocked' : 'locked'}">Diamond Certified</div>
            <div class="achievement ${this.achievements.billboardOne ? 'unlocked' : 'locked'}">Billboard #1</div>
            <div class="achievement ${this.achievements.millionSeller ? 'unlocked' : 'locked'}">Million Seller</div>
            <div class="achievement ${this.achievements.tourMaster ? 'unlocked' : 'locked'}">Tour Master</div>
        `;

        // Update trends
        const trendsDiv = document.getElementById('trends');
        trendsDiv.innerHTML = this.trends.map(t => 
            `<div class="trend ${t.type}">${t.text}</div>`
        ).join('');

        // Update releases
        const releasesDiv = document.getElementById('yourReleases');
        if (this.releases.length === 0) {
            releasesDiv.innerHTML = '<p class="empty-state">No releases yet. Start recording!</p>';
        } else {
            releasesDiv.innerHTML = this.releases.map(r => {
                const cert = r.certified ? `<span class="certification cert-${r.certified}">${r.certified.toUpperCase()}</span>` : '';
                return `
                    <div class="release-item">
                        <h3>${r.title}</h3>
                        <p>Type: ${r.type} | Price: $${r.price}</p>
                        <p>Streams: ${r.streams.toLocaleString()} | Sales: ${r.sales.toLocaleString()}</p>
                        <p>Views: ${r.views.toLocaleString()} | Units: ${r.units.toLocaleString()}</p>
                        <p>Revenue: $${r.revenue.toLocaleString()}</p>
                        ${cert}
                    </div>
                `;
            }).join('');
        }

        // Update billboards
        this.updateBillboardUI();
    }

    updateBillboardUI() {
        const billboard100Div = document.getElementById('billboard100');
        billboard100Div.innerHTML = this.billboard100.slice(0, 20).map(item => `
            <div class="chart-item ${item.isPlayer ? 'player-song' : ''}">
                <div class="chart-position">#${item.position}</div>
                <div class="chart-info">
                    <strong>${item.title}</strong>
                    <small>${item.artist} - ${item.units.toLocaleString()} units - ${item.weeksOnChart} weeks</small>
                </div>
            </div>
        `).join('');

        const billboard200Div = document.getElementById('billboard200');
        billboard200Div.innerHTML = this.billboard200.slice(0, 20).map(item => `
            <div class="chart-item ${item.isPlayer ? 'player-song' : ''}">
                <div class="chart-position">#${item.position}</div>
                <div class="chart-info">
                    <strong>${item.title}</strong>
                    <small>${item.artist} - ${item.units.toLocaleString()} units - ${item.weeksOnChart} weeks</small>
                </div>
            </div>
        `).join('');
    }

    saveGame() {
        const saveData = {
            currentWeek: this.currentWeek,
            balance: this.balance,
            totalStreams: this.totalStreams,
            totalSales: this.totalSales,
            totalViews: this.totalViews,
            recordedSongs: this.recordedSongs,
            releases: this.releases,
            achievements: this.achievements,
            sandboxMode: this.sandboxMode
        };

        localStorage.setItem('musicGameSave', JSON.stringify(saveData));
        alert('Game saved successfully!');
    }

    loadGame() {
        const saveData = localStorage.getItem('musicGameSave');
        if (saveData) {
            const data = JSON.parse(saveData);
            this.currentWeek = data.currentWeek;
            this.balance = data.balance;
            this.totalStreams = data.totalStreams;
            this.totalSales = data.totalSales;
            this.totalViews = data.totalViews;
            this.recordedSongs = data.recordedSongs;
            this.releases = data.releases;
            this.achievements = data.achievements;
            this.sandboxMode = data.sandboxMode || false;
            this.updateUI();
            alert('Game loaded successfully!');
        }
    }

    newGame() {
        if (confirm('Are you sure you want to start a new game? All progress will be lost.')) {
            localStorage.removeItem('musicGameSave');
            location.reload();
        }
    }
}

// Initialize game
let game;
window.addEventListener('DOMContentLoaded', () => {
    game = new MusicGame();
    
    // Try to load saved game
    const saveData = localStorage.getItem('musicGameSave');
    if (saveData && confirm('Found saved game. Would you like to continue?')) {
        game.loadGame();
    }
});
    </script>
</body>
</html>
